<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://fairyxxx.github.io</id>
    <title>花开两朵，天各一方！ • Posts by &#34;note&#34; tag</title>
    <link href="https://fairyxxx.github.io" />
    <updated>2023-07-19T00:38:49.055Z</updated>
    <category term="note" />
    <category term="emotion" />
    <category term="problem" />
    <entry>
        <id>https://fairyxxx.github.io/note/Nginx%E5%9F%BA%E7%A1%80/</id>
        <title>Nginx基础</title>
        <link rel="alternate" href="https://fairyxxx.github.io/note/Nginx%E5%9F%BA%E7%A1%80/"/>
        <content type="html">&lt;p&gt;&lt;a name=&#34;TqfKT&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;nginx简介&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nginx简介&#34;&gt;#&lt;/a&gt; Nginx 简介&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Nginx 是⽬前最流⾏的 Web 服务器，最开始是由⼀个叫做 igor 的俄罗斯的程序员开发的，2019 年 3 ⽉ 11 ⽇被美国的 F5 公司以 6.7 亿美元的价格收购，现在 Nginx 是 F5 公司旗下的⼀款产品了。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C10K&lt;/code&gt;  问题是 &lt;code&gt;10000 concurrent connection&lt;/code&gt;  同时处理 10000 个并发连接。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;epoll - IO&lt;/code&gt;  多路复用高并发，最大 50000 个连接高性能、低内耗、热部署。&lt;br&gt;
&lt;a name=&#34;YIRt1&#34;&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;nginx的版本&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nginx的版本&#34;&gt;#&lt;/a&gt; Nginx 的版本&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Nginx&lt;/code&gt;  开源版本主要分为两种，⼀种是稳定版，⼀种是主线版。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主线版（mainline）：主线版是最新的版本，功能会⽐较多，会包含⼀些正在开发中的体 验性模块功能，但是也可能会有⼀些新的 &lt;code&gt;bug&lt;/code&gt; 。&lt;/li&gt;
&lt;li&gt;稳定版（Stable）：稳定版是经过⻓时间测试的版本，不会有太多的 &lt;code&gt;bug&lt;/code&gt; ，也不会包含⼀ 些新的功能。&lt;br&gt;
&lt;a name=&#34;RpgmK&#34;&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;nginx的安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nginx的安装&#34;&gt;#&lt;/a&gt; Nginx 的安装&lt;/h1&gt;
&lt;p&gt;&lt;a name=&#34;ujayA&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;方式一包管理器&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#方式一包管理器&#34;&gt;#&lt;/a&gt; 方式一：包管理器&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Linux：
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$ sudo apt update&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ sudo apt install nginx&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;MocOS:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$ brew install nginx&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Windows:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$ scoop install nginx&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ choco install nginx&lt;/code&gt; &lt;br&gt;
&lt;a name=&#34;wxmar&#34;&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;方式二&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#方式二&#34;&gt;#&lt;/a&gt; 方式二：&lt;/h2&gt;
&lt;p&gt;&lt;a name=&#34;tCRlh&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;从源码编译安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#从源码编译安装&#34;&gt;#&lt;/a&gt; 从源码编译安装&lt;/h3&gt;
&lt;p&gt;从源码编译安装的⽅式可以让我们⾃定义 Nginx 的安装⽬录、模块等，但是安装过程⽐较繁琐，需要安装⼀些依赖库。&lt;br&gt;
&lt;a name=&#34;SvCh6&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;安装pcre库&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#安装pcre库&#34;&gt;#&lt;/a&gt; 安装 &lt;code&gt;PCRE&lt;/code&gt;  库&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;PCRE&lt;/code&gt;  是 &lt;code&gt;Perl Compatible Regular Expressions&lt;/code&gt;  的缩写，是⼀个 &lt;code&gt;Perl&lt;/code&gt;  库，包括 &lt;code&gt;perl&lt;/code&gt;  兼容的正则表达式库。&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wget github.com/PCRE2Project/pcre2/releases/download/pcre2&lt;span class=&#34;number&#34;&gt;-10.42&lt;/span&gt;/pcre2-&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;10.42&lt;/span&gt;.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;tar -zxf pcre2&lt;span class=&#34;number&#34;&gt;-10.42&lt;/span&gt;.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cd pcre2&lt;span class=&#34;number&#34;&gt;-10.42&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;./configure&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;make&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo make install&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;UHAnZ&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;安装zlib库&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#安装zlib库&#34;&gt;#&lt;/a&gt; 安装 &lt;code&gt;zlib&lt;/code&gt;  库&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;zlib&lt;/code&gt;  是⼀个数据压缩库，⽤于 &lt;code&gt;Nginx&lt;/code&gt;  的 &lt;code&gt;gzip&lt;/code&gt;  模块。&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wget http:&lt;span class=&#34;comment&#34;&gt;//zlib.net/zlib-1.2.13.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;tar -zxf zlib&lt;span class=&#34;number&#34;&gt;-1.2&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.13&lt;/span&gt;.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cd zlib&lt;span class=&#34;number&#34;&gt;-1.2&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.13&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;./configure&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;make&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;biQvb&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;安装open-ssl库&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#安装open-ssl库&#34;&gt;#&lt;/a&gt; 安装 &lt;code&gt;Open SSL&lt;/code&gt;  库&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;OpenSSL&lt;/code&gt;  是⼀个强⼤的安全套接字层密码库，⽤于 &lt;code&gt;Nginx&lt;/code&gt;  的 &lt;code&gt;SSL&lt;/code&gt;  模块。&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wget http:&lt;span class=&#34;comment&#34;&gt;//www.openssl.org/source/openssl-1.1.1t.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;tar -zxf openssl&lt;span class=&#34;number&#34;&gt;-1.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;t.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cd openssl&lt;span class=&#34;number&#34;&gt;-1.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;t&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;./Configure darwin64-x86_64-cc --prefix=/usr&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;make&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;safRr&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;下载nginx源码&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#下载nginx源码&#34;&gt;#&lt;/a&gt; 下载 &lt;code&gt;Nginx&lt;/code&gt;  源码&lt;/h4&gt;
&lt;p&gt;下载主线版的 &lt;code&gt;Nginx&lt;/code&gt;  源码：&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wget https:&lt;span class=&#34;comment&#34;&gt;//nginx.org/download/nginx-1.23.4.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;tar zxf nginx&lt;span class=&#34;number&#34;&gt;-1.23&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.4&lt;/span&gt;.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cd nginx&lt;span class=&#34;number&#34;&gt;-1.23&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下载稳定版的 &lt;code&gt;Nginx&lt;/code&gt;  源码：&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wget https:&lt;span class=&#34;comment&#34;&gt;//nginx.org/download/nginx-1.24.0.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;tar zxf nginx&lt;span class=&#34;number&#34;&gt;-1.24&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cd nginx&lt;span class=&#34;number&#34;&gt;-1.24&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;doAzW&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;配置编译选项&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#配置编译选项&#34;&gt;#&lt;/a&gt; 配置编译选项&lt;/h4&gt;
&lt;p&gt;编译选项可以通过  &lt;code&gt;./configure --help&lt;/code&gt;  来查看。&lt;br /&gt;下⾯是⼀个官⽹的例⼦：&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;./configure&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--sbin-path=/usr/local/nginx/nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--conf-path=/usr/local/nginx/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--pid-path=/usr/local/nginx/nginx.pid&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--with-pcre=../pcre2&lt;span class=&#34;number&#34;&gt;-10.42&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--with-zlib=../zlib&lt;span class=&#34;number&#34;&gt;-1.2&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.13&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--with-http_ssl_module&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--with-stream&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--with-mail=dynamic&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--add-module=/usr/build/nginx-rtmp-module&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--add-dynamic-module=/usr/build/&lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;party_module&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数 &lt;code&gt;（Parameter）&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;说明 &lt;code&gt;（Description  ）&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt; --prefix=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定安装⽬录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--sbin-path=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定 Nginx 可执⾏⽂件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt; --conf-path=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定配置⽂件位置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--pid-path=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定 &lt;code&gt;pid&lt;/code&gt;  ⽂件位置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--error-log-path=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定错误⽇志⽂件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--http-log-path=  &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定 &lt;code&gt;HTTP&lt;/code&gt;  ⽇志⽂件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--user= &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定运⾏ Nginx 的⽤户&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--group=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定运⾏ Nginx 的组&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--with-pcre=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定 &lt;code&gt;PCRE&lt;/code&gt;  库的位置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--with-pcre-jit&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;开启 &lt;code&gt;PCRE&lt;/code&gt;  的 &lt;code&gt;JIT（Just-in-time compilation）&lt;/code&gt; ⽀持&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--with-zlib=  &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定 &lt;code&gt;zlib&lt;/code&gt;  库的位置&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a name=&#34;nLTXK&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;nginx安装预编译二进制包&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nginx安装预编译二进制包&#34;&gt;#&lt;/a&gt; Nginx 安装 (预编译⼆进制包)&lt;/h3&gt;
&lt;p&gt;这种⽅式⽐通过源码编译安装的⽅式要简单快捷得多，只需要输⼊⼀条 &lt;code&gt;install&lt;/code&gt;  命令就可以了。 不同 &lt;code&gt;Linux&lt;/code&gt;  发⾏版的安装⽅式略有不同，下⾯分别介绍⼀下。&lt;br&gt;
&lt;a name=&#34;FWdiP&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;centosrheloracle-linuxalmalinuxrocky-linux-repository&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#centosrheloracle-linuxalmalinuxrocky-linux-repository&#34;&gt;#&lt;/a&gt;  &lt;code&gt;CentOS/RHEL/Oracle Linux/AlmaLinux/Rocky Linux repository.&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;CentOS&lt;/code&gt;  系 &lt;code&gt;Linux&lt;/code&gt;  发⾏版可以使⽤ &lt;code&gt;yum&lt;/code&gt;  来安装。&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;1.&lt;/span&gt; 安装EPEL仓库&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo yum install epel-release&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;2.&lt;/span&gt; 更新repo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo yum update&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;3.&lt;/span&gt; 安装nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo yum install nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;4.&lt;/span&gt; 验证安装&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo nginx -V&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;也可以通过 &lt;code&gt;Nginx&lt;/code&gt;  的官⽅仓库来安装，这样可以保证安装的是最新的版本。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装前置依赖&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sudo yum install yum-utils&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;添加 nginx 仓库&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sudo vi /etc/yum.repos.d/nginx.repo&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;添加以下内容&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[nginx-stable] [nginx-stable]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;name=nginx stable repo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;baseurl=http:&lt;span class=&#34;comment&#34;&gt;//nginx.org/packages/centos/$releasever/$basearch/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgcheck=&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;enabled=&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgkey=https:&lt;span class=&#34;comment&#34;&gt;//nginx.org/keys/nginx_signing.key&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;module_hotfixes=&lt;span class=&#34;literal&#34;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[nginx-mainline] [nginx-mainline]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;name=nginx mainline repo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;baseurl=http:&lt;span class=&#34;comment&#34;&gt;//nginx.org/packages/mainline/centos/$releasever/$basearch/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgcheck=&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;enabled=&lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgkey=https:&lt;span class=&#34;comment&#34;&gt;//nginx.org/keys/nginx_signing.key&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;module_hotfixes=&lt;span class=&#34;literal&#34;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上⾯的  &lt;code&gt;stable&lt;/code&gt;  和 &lt;code&gt;mainline&lt;/code&gt;  就分别表示稳定版和主线版，可以根据⾃⼰的需要来选择。&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;更新 repo&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sudo yum update&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;安装 nginx&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sudo yum install nginx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;验证安装&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;除了使⽤  &lt;code&gt;sudo nginx -V&lt;/code&gt;  之外，还可以使⽤下⾯的⽅式来验证：&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# 启动Nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl -I &lt;span class=&#34;number&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果能够看到类似下⾯的输出，就表示安装成功了：&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;HTTP/&lt;span class=&#34;number&#34;&gt;1.1&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;200&lt;/span&gt; OK&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Server: nginx/&lt;span class=&#34;number&#34;&gt;1.25&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;R7FCy&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;debianubuntu-repository&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#debianubuntu-repository&#34;&gt;#&lt;/a&gt;  &lt;code&gt;Debian/Ubuntu repository  &lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;Debian&lt;/code&gt; 、 &lt;code&gt;Ubuntu&lt;/code&gt;  系列的 &lt;code&gt;Linux&lt;/code&gt;  发⾏版可以使⽤ &lt;code&gt;apt&lt;/code&gt;  来安装。&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;1.&lt;/span&gt; 更新仓库信息&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo apt-get update&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;2.&lt;/span&gt; 安装nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo apt-get install nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;3.&lt;/span&gt; 验证安装&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo nginx -V&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;同样也可以从 &lt;code&gt;Nginx&lt;/code&gt;  官⽅仓库来安装。&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;1.&lt;/span&gt; 安装前置依赖&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo apt install curl gnupg2 ca-certificates lsb-release debian-archivekeyring&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;2.&lt;/span&gt; 导⼊官⽅Nginx签名密钥&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl https:&lt;span class=&#34;comment&#34;&gt;//nginx.org/keys/nginx_signing.key | gpg --dearmor \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; | sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg &amp;gt;/dev/null&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;3.&lt;/span&gt; 验证下载的⽂件中包含了正确的密钥&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpg --dry-run --quiet --no-keyring --import --import-options import-show&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/usr/share/keyrings/nginx-archive-keyring.gpg&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;4.&lt;/span&gt; 设置稳定版或者主线版的Nginx包&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 稳定版&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo &lt;span class=&#34;string&#34;&gt;&amp;quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;http://nginx.org/packages/debian `lsb_release -cs` nginx&amp;quot;&lt;/span&gt; \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; | sudo tee /etc/apt/sources.&lt;span class=&#34;built_in&#34;&gt;list&lt;/span&gt;.d/nginx.&lt;span class=&#34;built_in&#34;&gt;list&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 主线版&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo &lt;span class=&#34;string&#34;&gt;&amp;quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;http://nginx.org/packages/mainline/debian `lsb_release -cs` nginx&amp;quot;&lt;/span&gt; \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; | sudo tee /etc/apt/sources.&lt;span class=&#34;built_in&#34;&gt;list&lt;/span&gt;.d/nginx.&lt;span class=&#34;built_in&#34;&gt;list&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;5.&lt;/span&gt; 设置仓库优先级，优先使⽤Nginx官⽅仓库&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo -e &lt;span class=&#34;string&#34;&gt;&amp;quot;Package: *\nPin: origin nginx.org\nPin: release o=nginx\nPinPriority: 900\n&amp;quot;&lt;/span&gt; \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; | sudo tee /etc/apt/preferences.d/&lt;span class=&#34;number&#34;&gt;99&lt;/span&gt;nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;6.&lt;/span&gt; 安装nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo apt update&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo apt install nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# &lt;span class=&#34;number&#34;&gt;7.&lt;/span&gt; 验证安装&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl -I &lt;span class=&#34;number&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;yhB80&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;方式三使用docker安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#方式三使用docker安装&#34;&gt;#&lt;/a&gt; 方式三：使用 &lt;code&gt;Docker&lt;/code&gt;  安装&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;$ docker pull nginx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a name=&#34;SuntV&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;服务启停&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#服务启停&#34;&gt;#&lt;/a&gt; 服务启停&lt;/h1&gt;
&lt;p&gt;启动：直接在命令行输入 &lt;code&gt;nginx&lt;/code&gt; &lt;br /&gt;浏览器： &lt;code&gt;localhost&lt;/code&gt; &lt;br /&gt;查看进程： &lt;code&gt;ps -ef|grep nginx&lt;/code&gt; &lt;br /&gt;&lt;img data-src=&#34;https://cdn.nlark.com/yuque/0/2023/png/34696645/1689730266000-56189548-7250-4075-a8d7-ebe07a21c2cb.png#averageHue=%233285c9&amp;amp;clientId=u5faf9193-7775-4&amp;amp;from=paste&amp;amp;height=533&amp;amp;id=u16db3c4b&amp;amp;originHeight=666&amp;amp;originWidth=1328&amp;amp;originalType=binary&amp;amp;ratio=1.25&amp;amp;rotation=0&amp;amp;showTitle=false&amp;amp;size=289692&amp;amp;status=done&amp;amp;style=none&amp;amp;taskId=udf067811-97d6-4a7e-908b-526572648bc&amp;amp;title=&amp;amp;width=1062.4&#34; alt=&#34;image.png&#34;&gt;&lt;br /&gt;查看端口占用情况： &lt;code&gt;lsof -i:80&lt;/code&gt; &lt;br /&gt; &lt;code&gt;nginx -s signal&lt;/code&gt;  停止或者重启&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;signal&lt;/code&gt;  可替换为以下：
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;quit&lt;/code&gt;  优雅停止&lt;/li&gt;
&lt;li&gt;&lt;code&gt;stop&lt;/code&gt;  立即停止&lt;/li&gt;
&lt;li&gt;&lt;code&gt;reload&lt;/code&gt;  重载配置文件&lt;/li&gt;
&lt;li&gt;&lt;code&gt;reopen&lt;/code&gt;  重新打开日志文件&lt;br&gt;
&lt;a name=&#34;fzJbd&#34;&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;静态站点的部署&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#静态站点的部署&#34;&gt;#&lt;/a&gt; 静态站点的部署&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;nginx -V&lt;/code&gt;  查看 Nginx 的安装目录、编译参数以及配置文件和日志文件的位置等各种信息。&lt;br /&gt; &lt;code&gt;nginx -t&lt;/code&gt;  查看 nginx 配置文件&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img data-src=&#34;https://cdn.nlark.com/yuque/0/2023/png/34696645/1689730733672-86a66b10-7296-477d-bc77-ccbf2564da10.png#averageHue=%230e83fd&amp;amp;clientId=u5faf9193-7775-4&amp;amp;from=paste&amp;amp;height=284&amp;amp;id=u6c5abd69&amp;amp;originHeight=355&amp;amp;originWidth=742&amp;amp;originalType=binary&amp;amp;ratio=1.25&amp;amp;rotation=0&amp;amp;showTitle=false&amp;amp;size=107512&amp;amp;status=done&amp;amp;style=none&amp;amp;taskId=ua00b778b-5f2d-47a4-8412-6db3a2e363f&amp;amp;title=&amp;amp;width=593.6&#34; alt=&#34;image.png&#34;&gt;&lt;br&gt;
&lt;a name=&#34;LmzY0&#34;&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;nginx的配置文件&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nginx的配置文件&#34;&gt;#&lt;/a&gt; Nginx 的配置⽂件&lt;/h1&gt;
&lt;p&gt;Nginx 的配置⽂件是  &lt;code&gt;nginx.conf &lt;/code&gt; ，⼀般位于  &lt;code&gt;/etc/nginx/nginx.conf &lt;/code&gt; 。 可以使⽤  &lt;code&gt;nginx -t &lt;/code&gt; 来查看配置⽂件的位置和检查配置⽂件是否正确。&lt;br&gt;
&lt;a name=&#34;cvhFS&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;配置文件的结构&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#配置文件的结构&#34;&gt;#&lt;/a&gt; 配置⽂件的结构&lt;/h2&gt;
&lt;p&gt;Nginx 的配置⽂件是由⼀系列的指令组成的，每个指令都是由⼀个指令名和⼀个或者多个参数组成的。&lt;br /&gt; 指令和参数之间使⽤空格来分隔，指令以分号；结尾，参数可以使⽤单引号或者双引号来包裹  &lt;br /&gt; 配置⽂件分为以下⼏个部分：&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# 全局块&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;worker_processes &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;events &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;meta&#34;&gt;# events块&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;http &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;meta&#34;&gt;# http块&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		&lt;span class=&#34;meta&#34;&gt;# server块&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 		location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			&lt;span class=&#34;meta&#34;&gt;# location块&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;PaZue&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;全局块&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#全局块&#34;&gt;#&lt;/a&gt; 全局块&lt;/h3&gt;
&lt;p&gt;全局块是配置⽂件的第⼀个块，也是配置⽂件的主体部分，主要⽤来设置⼀些影响 &lt;code&gt;Nginx&lt;/code&gt;  服务 器整体运⾏的配置指令，主要包括配置运⾏ &lt;code&gt;Nginx&lt;/code&gt;  服务器的⽤户（组）、允许⽣成的 &lt;code&gt;worker process&lt;/code&gt;  数、进程 &lt;code&gt;PID&lt;/code&gt;  存放路径、⽇志存放路径和类型以及配置⽂件引⼊等。&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# 指定运⾏Nginx服务器的⽤户，只能在全局块配置&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 将user指令注释掉，或者配置成nobody的话所有⽤户都可以运⾏&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;# user [user] [group]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;# user nobody nobody;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;user nginx;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 指定⽣成的worker进程的数量，也可使⽤⾃动模式，只能在全局块配置&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;worker_processes &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 错误⽇志存放路径和类型&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;error_log  /var/&lt;span class=&#34;built_in&#34;&gt;log&lt;/span&gt;/nginx/error.&lt;span class=&#34;built_in&#34;&gt;log&lt;/span&gt; warn;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 进程PID存放路径&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;pid    /var/run/nginx.pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;nhDgE&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;events块&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#events块&#34;&gt;#&lt;/a&gt; events 块&lt;/h3&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;events &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	# 指定使⽤哪种⽹络IO模型，只能在events块中进⾏配置&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;meta&#34;&gt;# use epoll&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	# 每个worker process允许的最⼤连接数&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	 worker_connections &lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;g8zFo&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;http块&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#http块&#34;&gt;#&lt;/a&gt; http 块&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;http&lt;/code&gt;  块是配置⽂件的主要部分，包括 &lt;code&gt;http&lt;/code&gt;  全局块和 &lt;code&gt;server&lt;/code&gt;  块。&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;http &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;meta&#34;&gt;# nginx 可以使⽤&lt;span class=&#34;keyword&#34;&gt;include&lt;/span&gt;指令引⼊其他配置⽂件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	 include 	/etc/nginx/mime.types;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	# 默认类型，如果请求的URL没有包含⽂件类型，会使⽤默认类型&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	 default_type application/octet-stream; # 默认类型&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 开启⾼效⽂件传输模式&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	sendfile on;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 连接超时时间&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	keepalive_timeout &lt;span class=&#34;number&#34;&gt;65&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # access_log ⽇志存放路径和类型&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 格式为：access_log &amp;lt;path&amp;gt; [format [buffer=size] [gzip[=level]]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[flush=time] [&lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt;=condition]];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	access_log /var/&lt;span class=&#34;built_in&#34;&gt;log&lt;/span&gt;/nginx/access.&lt;span class=&#34;built_in&#34;&gt;log&lt;/span&gt; main;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 定义⽇志格式&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	log_format main &lt;span class=&#34;string&#34;&gt;&amp;#x27;$remote_addr - $remote_user [$time_local]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&amp;quot;$request&amp;quot; &amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;					&lt;span class=&#34;string&#34;&gt;&amp;#x27;$status $body_bytes_sent &amp;quot;$http_referer&amp;quot; &amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;					&lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;quot;$http_user_agent&amp;quot; &amp;quot;$http_x_forwarded_for&amp;quot;&amp;#x27;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	# 设置sendfile最⼤传输⽚段⼤⼩，默认为&lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;，表示不限制&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	# sendfile_max_chunk &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;m;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 每个连接的请求次数&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	# keepalive_requests &lt;span class=&#34;number&#34;&gt;100&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# keepalive超时时间&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	keepalive_timeout &lt;span class=&#34;number&#34;&gt;65&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 开启gzip压缩&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;meta&#34;&gt;# gzip on;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 开启gzip压缩的最⼩⽂件⼤⼩&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	# gzip_min_length &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;k;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# gzip压缩级别，1-9，级别越⾼压缩率越⾼，但是消耗CPU资源也越多&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	# gzip_comp_level &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# gzip压缩⽂件类型&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	# gzip_types text/plain application/javascript application/xjavascript text/css application/xml text/javascript application/x-httpdphp image/jpeg image/gif image/png;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# upstream指令⽤于定义⼀组服务器，⼀般⽤来配置反向代理和负载均衡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	upstream www.example.com &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        # ip_hash指令⽤于设置负载均衡的⽅式，ip_hash表示使⽤客户端的IP进⾏hash，&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;这样可以保证同⼀个客户端的请求每次都会分配到同⼀个服务器，解决了session共享的问题&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 		ip_hash;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		&lt;span class=&#34;meta&#34;&gt;# weight ⽤于设置权重，权重越⾼被分配到的⼏率越⼤&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 		server &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.50&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.11&lt;/span&gt;:&lt;span class=&#34;number&#34;&gt;80&lt;/span&gt; weight=&lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 		server &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.50&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.12&lt;/span&gt;:&lt;span class=&#34;number&#34;&gt;80&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 		server &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.50&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.13&lt;/span&gt;:&lt;span class=&#34;number&#34;&gt;80&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		# 参考server块的配置&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; 	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;RlVan&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;server块&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#server块&#34;&gt;#&lt;/a&gt; server 块&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;server&lt;/code&gt;  块是配置虚拟主机的，⼀个 &lt;code&gt;http&lt;/code&gt;  块可以包含多个 &lt;code&gt;server&lt;/code&gt;  块，每个 &lt;code&gt;server&lt;/code&gt;  块就是⼀个虚拟主 机。&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 监听IP和端⼝&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# listen的格式为：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# listen [ip]:port [default_server] [ssl] [http2] [spdy]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# listen指令⾮常灵活，可以指定多个IP和端⼝，也可以使⽤通配符&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 下⾯是⼏个实际的例⼦：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# listen 127.0.0.1:80; # 监听来⾃127.0.0.1的80端⼝的请求&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# listen 80; # 监听来⾃所有IP的80端⼝的请求&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# listen *:80; # 监听来⾃所有IP的80端⼝的请求，同上&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# listen 127.0.0.1; # 监听来⾃来⾃127.0.0.1的80端⼝，默认端⼝为80&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 	&lt;span class=&#34;number&#34;&gt;80&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # server_name ⽤来指定虚拟主机的域名，可以使⽤精确匹配、通配符匹配和正则匹配等&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ⽅式&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # server_name example.org www.example.org; # 精确匹配&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # server_name *.example.org; # 通配符匹配&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # server_name ~^www\d+\.example\.net$; # 正则匹配&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name localhost;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# location块⽤来配置请求的路由，⼀个server块可以包含多个location块，每个&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location块就是⼀个请求路由&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# location块的格式是：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# location [=|~|~*|^~] /uri/ &amp;#123; ... &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # = 表示精确匹配，只有完全匹配上才能⽣效&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # ~ 表示区分⼤⼩写的正则匹配&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # ~* 表示不区分⼤⼩写的正则匹配&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # ^~ 表示普通字符匹配，如果匹配成功，则不再匹配其他location&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # /uri/ 表示请求的URI，可以是字符串，也可以是正则表达式&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # &amp;#123; ... &amp;#125; 表示location块的配置内容&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# root指令⽤于指定请求的根⽬录，可以是绝对路径，也可以是相对路径&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    root /usr/share/nginx/html; # 根⽬录&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;# index指令⽤于指定默认⽂件，如果请求的是⽬录，则会在⽬录下查找默认⽂件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    index index.html index.htm; # 默认⽂件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 下⾯是⼀些location的示例：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location = / &amp;#123; # 精确匹配请求&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    root /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;              index index.html index.htm;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;             &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location ^~ /images/ &amp;#123; # 匹配以/images/开头的请求&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    root /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location ~* \.(gif|jpg|jpeg)$ &amp;#123; # 匹配以gif、jpg或者jpeg结尾的请求&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    root /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                              &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location !~ \.(gif|jpg|jpeg)$ &amp;#123; # 不匹配以gif、jpg或者jpeg结尾的请求&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    root /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                              &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location !~* \.(gif|jpg|jpeg)$ &amp;#123; # 不匹配以gif、jpg或者jpeg结尾的请求&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    root /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                               &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # error_page ⽤于指定错误⻚⾯，可以指定多个，按照优先级从⾼到低依次查找&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    error_page &lt;span class=&#34;number&#34;&gt;500&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;502&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;503&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;504&lt;/span&gt; /&lt;span class=&#34;number&#34;&gt;50&lt;/span&gt;x.html; # 错误⻚⾯&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location = /&lt;span class=&#34;number&#34;&gt;50&lt;/span&gt;x.html &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    root /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;JG5xY&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;nginx的常用命令&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nginx的常用命令&#34;&gt;#&lt;/a&gt; Nginx 的常⽤命令&lt;/h1&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;nginx 				# 启动Nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nginx -c filename 	# 指定配置⽂件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nginx -V 			# 查看Nginx的版本和编译参数等信息&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nginx -t			# 检查配置⽂件是否正确，也可⽤来定位配置⽂件的位置&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nginx -s quit 		# 优雅停⽌Nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nginx -s stop 		# 快速停⽌Nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nginx -s reload 	# 重新加载配置⽂件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nginx -s reopen 	# 重新打开⽇志⽂件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a name=&#34;pajQD&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;nginx的常用模块&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nginx的常用模块&#34;&gt;#&lt;/a&gt; Nginx 的常⽤模块&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;模块名（Module Name）&lt;/th&gt;
&lt;th&gt;描述（Description）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_access_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;接受或者拒绝特定的客户端请求&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_auth_basic_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;HTTP&lt;/code&gt;  基本认证，使⽤⽤户名和密码来限制对资源的 访问&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_autoindex_module &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;⾃动索引，⽤于显示⽬录列表&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt; http_browser_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;从  &lt;code&gt;User-Agent &lt;/code&gt; 请求头中获取和识别客户端浏览器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt; http_charset_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;添加特定的字符集到  &lt;code&gt;Content-Type&lt;/code&gt;  响应头中&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt; http_empty_gif_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;返回⼀个 1 像素的透明 &lt;code&gt;GIF&lt;/code&gt;  图⽚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_fastcgi_module &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;FastCGI&lt;/code&gt;  ⽀持&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_geo_module &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;从 &lt;code&gt;IP&lt;/code&gt;  地址中获取地理位置信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_gzip_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Gzip&lt;/code&gt;  压缩⽀持&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_limit_conn_module  &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;限制并发连接数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_limit_req_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;限制请求速率&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_map_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;从变量中获取值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_memcached_module  &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Memcached&lt;/code&gt;  ⽀持&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_proxy_module &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;反向代理⽀持&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_referer_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;防盗链&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_rewrite_module  &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;URL&lt;/code&gt;  重写&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_scgi_module &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;转发请求到 &lt;code&gt;SCGI&lt;/code&gt;  服务器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_ssi_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;处理和⽀持 &lt;code&gt;SSI（Server Side Includes）&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_split_clients_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;根据客户端 &lt;code&gt;IP&lt;/code&gt;  地址或者其他变量将客户端分配到组 中，⼀般⽤于 &lt;code&gt;A/B&lt;/code&gt;  测试&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_upstream_hash_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;启⽤⼀致性哈希负载均衡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_upstream_ip_hash_module &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;启⽤ &lt;code&gt;IP&lt;/code&gt;  哈希负载均衡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_upstream_keepalive_module  &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;启⽤⻓连接负载均衡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_upstream_least_conn_module &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;启⽤最少连接负载均衡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_upstream_zone_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;启⽤共享内存负载均衡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt; http_userid_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;为客户端设置⼀个唯⼀的 &lt;code&gt;ID（UID、cookie）&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;http_uwsgi_module&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;转发请求到 &lt;code&gt;uWSGI&lt;/code&gt;  服务器，⼀般⽤于 &lt;code&gt;Python&lt;/code&gt;  应用&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
        <category term="note" />
        <updated>2023-07-19T00:38:49.055Z</updated>
    </entry>
</feed>
