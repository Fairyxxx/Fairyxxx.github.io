



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
<!--è§£å†³è¯­é›€å›¾ç‰‡æ— æ³•æ˜¾ç¤º-->
<meta name="referrer" content="no-referrer" />
  <link rel="apple-touch-icon" sizes="180x180" href="//cdn.jsdelivr.net/gh/Fairyxxx/Fairyxxx.github.io@latest/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="//cdn.jsdelivr.net/gh/Fairyxxx/Fairyxxx.github.io@latest/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="â¸œâ¤â¸ğ“œğ“ ğ“ğ’¾ğ’»ğ“® â€™â€™â¥Â»Â»" href="https://fairyxxx.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="â¸œâ¤â¸ğ“œğ“ ğ“ğ’¾ğ’»ğ“® â€™â€™â¥Â»Â»" href="https://fairyxxx.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="â¸œâ¤â¸ğ“œğ“ ğ“ğ’¾ğ’»ğ“® â€™â€™â¥Â»Â»" href="https://fairyxxx.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/Fairyxxx/Fairyxxx.github.io@latest/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="note" />


<link rel="canonical" href="https://fairyxxx.github.io/note/Nginx%E5%9F%BA%E7%A1%80/">



  <title>
Nginx åŸºç¡€ |
Fairy Tale = â¸œâ¤â¸ğ“œğ“ ğ“ğ’¾ğ’»ğ“® â€™â€™â¥Â»Â» = LYT</title><meta name="robots" content="noindex">
<meta name="generator" content="Hexo 6.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">Nginx åŸºç¡€
  </h1>
  
<div class="meta">
  <span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2023-07-19 08:38:49">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">å‘è¡¨äº</span>
    <time itemprop="dateCreated datePublished" datetime="2023-07-19T08:38:49+08:00">2023-07-19</time>
  </span>
  <span class="item" title="æœ¬æ–‡å­—æ•°">
    <span class="icon">
      <i class="ic i-pen"></i>
    </span>
    <span class="text">æœ¬æ–‡å­—æ•°</span>
    <span>9.6k</span>
    <span class="text">å­—</span>
  </span>
  <span class="item" title="é˜…è¯»æ—¶é•¿">
    <span class="icon">
      <i class="ic i-clock"></i>
    </span>
    <span class="text">é˜…è¯»æ—¶é•¿</span>
    <span>9 åˆ†é’Ÿ</span>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Fairy Tale</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://cdn-us.imgs.moe/2023/07/31/64c714bdd3b0e.jpg"></li>
          <li class="item" data-background-image="https://cdn-us.imgs.moe/2023/07/05/64a4c4aa94198.jpg"></li>
          <li class="item" data-background-image="https://cdn-us.imgs.moe/2023/07/05/64a4be1104c08.jpeg"></li>
          <li class="item" data-background-image="https://cdn-us.imgs.moe/2023/08/01/64c863c285fd5.jpg"></li>
          <li class="item" data-background-image="https://cdn-us.imgs.moe/2023/07/07/64a7ce38963de.jpg"></li>
          <li class="item" data-background-image="https://cdn-us.imgs.moe/2023/07/31/64c71515058bc.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">é¦–é¡µ</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="https://fairyxxx.github.io/note/Nginx%E5%9F%BA%E7%A1%80/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="//cdn.jsdelivr.net/gh/Fairyxxx/Fairyxxx.github.io@latest/images/avatar.jpg">
    <meta itemprop="name" content="Clown">
    <meta itemprop="description" content="LYT, æˆ‘å¾ˆå–œæ¬¢æ«å¶ï¼Œå¯æƒœï¼Œæ«å¶çº¢æ—¶ï¼Œæ€»å¤šç¦»åˆ«ã€‚">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="â¸œâ¤â¸ğ“œğ“ ğ“ğ’¾ğ’»ğ“® â€™â€™â¥Â»Â»">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <p><a name="TqfKT"></a></p>
<h1 id="nginxç®€ä»‹"><a class="markdownIt-Anchor" href="#nginxç®€ä»‹">#</a> Nginx ç®€ä»‹</h1>
<ul>
<li>Nginx æ˜¯â½¬å‰æœ€æµâ¾çš„ Web æœåŠ¡å™¨ï¼Œæœ€å¼€å§‹æ˜¯ç”±â¼€ä¸ªå«åš igor çš„ä¿„ç½—æ–¯çš„ç¨‹åºå‘˜å¼€å‘çš„ï¼Œ2019 å¹´ 3 â½‰ 11 â½‡è¢«ç¾å›½çš„ F5 å…¬å¸ä»¥ 6.7 äº¿ç¾å…ƒçš„ä»·æ ¼æ”¶è´­ï¼Œç°åœ¨ Nginx æ˜¯ F5 å…¬å¸æ——ä¸‹çš„â¼€æ¬¾äº§å“äº†ã€‚</li>
<li><code>C10K</code>  é—®é¢˜æ˜¯ <code>10000 concurrent connection</code>  åŒæ—¶å¤„ç† 10000 ä¸ªå¹¶å‘è¿æ¥ã€‚</li>
<li><code>epoll - IO</code>  å¤šè·¯å¤ç”¨é«˜å¹¶å‘ï¼Œæœ€å¤§ 50000 ä¸ªè¿æ¥é«˜æ€§èƒ½ã€ä½å†…è€—ã€çƒ­éƒ¨ç½²ã€‚<br>
<a name="YIRt1"></a></li>
</ul>
<h2 id="nginxçš„ç‰ˆæœ¬"><a class="markdownIt-Anchor" href="#nginxçš„ç‰ˆæœ¬">#</a> Nginx çš„ç‰ˆæœ¬</h2>
<p><code>Nginx</code>  å¼€æºç‰ˆæœ¬ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼Œâ¼€ç§æ˜¯ç¨³å®šç‰ˆï¼Œâ¼€ç§æ˜¯ä¸»çº¿ç‰ˆã€‚</p>
<ul>
<li>ä¸»çº¿ç‰ˆï¼ˆmainlineï¼‰ï¼šä¸»çº¿ç‰ˆæ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼ŒåŠŸèƒ½ä¼šâ½è¾ƒå¤šï¼Œä¼šåŒ…å«â¼€äº›æ­£åœ¨å¼€å‘ä¸­çš„ä½“ éªŒæ€§æ¨¡å—åŠŸèƒ½ï¼Œä½†æ˜¯ä¹Ÿå¯èƒ½ä¼šæœ‰â¼€äº›æ–°çš„ <code>bug</code> ã€‚</li>
<li>ç¨³å®šç‰ˆï¼ˆStableï¼‰ï¼šç¨³å®šç‰ˆæ˜¯ç»è¿‡â»“æ—¶é—´æµ‹è¯•çš„ç‰ˆæœ¬ï¼Œä¸ä¼šæœ‰å¤ªå¤šçš„ <code>bug</code> ï¼Œä¹Ÿä¸ä¼šåŒ…å«â¼€ äº›æ–°çš„åŠŸèƒ½ã€‚<br>
<a name="RpgmK"></a></li>
</ul>
<h1 id="nginxçš„å®‰è£…"><a class="markdownIt-Anchor" href="#nginxçš„å®‰è£…">#</a> Nginx çš„å®‰è£…</h1>
<p><a name="ujayA"></a></p>
<h2 id="æ–¹å¼ä¸€åŒ…ç®¡ç†å™¨"><a class="markdownIt-Anchor" href="#æ–¹å¼ä¸€åŒ…ç®¡ç†å™¨">#</a> æ–¹å¼ä¸€ï¼šåŒ…ç®¡ç†å™¨</h2>
<ul>
<li>Linuxï¼š
<ul>
<li><code>$ sudo apt update</code></li>
<li><code>$ sudo apt install nginx</code></li>
</ul>
</li>
<li>MocOS:
<ul>
<li><code>$ brew install nginx</code></li>
</ul>
</li>
<li>Windows:
<ul>
<li><code>$ scoop install nginx</code></li>
<li><code>$ choco install nginx</code> <br>
<a name="wxmar"></a></li>
</ul>
</li>
</ul>
<h2 id="æ–¹å¼äºŒ"><a class="markdownIt-Anchor" href="#æ–¹å¼äºŒ">#</a> æ–¹å¼äºŒï¼š</h2>
<p><a name="tCRlh"></a></p>
<h3 id="ä»æºç ç¼–è¯‘å®‰è£…"><a class="markdownIt-Anchor" href="#ä»æºç ç¼–è¯‘å®‰è£…">#</a> ä»æºç ç¼–è¯‘å®‰è£…</h3>
<p>ä»æºç ç¼–è¯‘å®‰è£…çš„â½…å¼å¯ä»¥è®©æˆ‘ä»¬â¾ƒå®šä¹‰ Nginx çš„å®‰è£…â½¬å½•ã€æ¨¡å—ç­‰ï¼Œä½†æ˜¯å®‰è£…è¿‡ç¨‹â½è¾ƒç¹çï¼Œéœ€è¦å®‰è£…â¼€äº›ä¾èµ–åº“ã€‚<br>
<a name="SvCh6"></a></p>
<h4 id="å®‰è£…pcreåº“"><a class="markdownIt-Anchor" href="#å®‰è£…pcreåº“">#</a> å®‰è£… <code>PCRE</code>  åº“</h4>
<p><code>PCRE</code>  æ˜¯ <code>Perl Compatible Regular Expressions</code>  çš„ç¼©å†™ï¼Œæ˜¯â¼€ä¸ª <code>Perl</code>  åº“ï¼ŒåŒ…æ‹¬ <code>perl</code>  å…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åº“ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget github.com/PCRE2Project/pcre2/releases/download/pcre2<span class="number">-10.42</span>/pcre2-</span><br><span class="line"><span class="number">10.42</span>.tar.gz</span><br><span class="line">tar -zxf pcre2<span class="number">-10.42</span>.tar.gz</span><br><span class="line">cd pcre2<span class="number">-10.42</span></span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a name="UHAnZ"></a></p>
<h4 id="å®‰è£…zlibåº“"><a class="markdownIt-Anchor" href="#å®‰è£…zlibåº“">#</a> å®‰è£… <code>zlib</code>  åº“</h4>
<p><code>zlib</code>  æ˜¯â¼€ä¸ªæ•°æ®å‹ç¼©åº“ï¼Œâ½¤äº <code>Nginx</code>  çš„ <code>gzip</code>  æ¨¡å—ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//zlib.net/zlib-1.2.13.tar.gz</span></span><br><span class="line">tar -zxf zlib<span class="number">-1.2</span><span class="number">.13</span>.tar.gz</span><br><span class="line">cd zlib<span class="number">-1.2</span><span class="number">.13</span></span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<p><a name="biQvb"></a></p>
<h4 id="å®‰è£…open-sslåº“"><a class="markdownIt-Anchor" href="#å®‰è£…open-sslåº“">#</a> å®‰è£… <code>Open SSL</code>  åº“</h4>
<p><code>OpenSSL</code>  æ˜¯â¼€ä¸ªå¼ºâ¼¤çš„å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œâ½¤äº <code>Nginx</code>  çš„ <code>SSL</code>  æ¨¡å—ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//www.openssl.org/source/openssl-1.1.1t.tar.gz</span></span><br><span class="line">tar -zxf openssl<span class="number">-1.1</span><span class="number">.1</span>t.tar.gz</span><br><span class="line">cd openssl<span class="number">-1.1</span><span class="number">.1</span>t</span><br><span class="line">./Configure darwin64-x86_64-cc --prefix=/usr</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<p><a name="safRr"></a></p>
<h4 id="ä¸‹è½½nginxæºç "><a class="markdownIt-Anchor" href="#ä¸‹è½½nginxæºç ">#</a> ä¸‹è½½ <code>Nginx</code>  æºç </h4>
<p>ä¸‹è½½ä¸»çº¿ç‰ˆçš„ <code>Nginx</code>  æºç ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="comment">//nginx.org/download/nginx-1.23.4.tar.gz</span></span><br><span class="line">tar zxf nginx<span class="number">-1.23</span><span class="number">.4</span>.tar.gz</span><br><span class="line">cd nginx<span class="number">-1.23</span><span class="number">.4</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¸‹è½½ç¨³å®šç‰ˆçš„ <code>Nginx</code>  æºç ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="comment">//nginx.org/download/nginx-1.24.0.tar.gz</span></span><br><span class="line">tar zxf nginx<span class="number">-1.24</span><span class="number">.0</span>.tar.gz</span><br><span class="line">cd nginx<span class="number">-1.24</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>
<p><a name="doAzW"></a></p>
<h4 id="é…ç½®ç¼–è¯‘é€‰é¡¹"><a class="markdownIt-Anchor" href="#é…ç½®ç¼–è¯‘é€‰é¡¹">#</a> é…ç½®ç¼–è¯‘é€‰é¡¹</h4>
<p>ç¼–è¯‘é€‰é¡¹å¯ä»¥é€šè¿‡  <code>./configure --help</code>  æ¥æŸ¥çœ‹ã€‚<br />ä¸‹â¾¯æ˜¯â¼€ä¸ªå®˜â½¹çš„ä¾‹â¼¦ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line">--sbin-path=/usr/local/nginx/nginx</span><br><span class="line">--conf-path=/usr/local/nginx/nginx.conf</span><br><span class="line">--pid-path=/usr/local/nginx/nginx.pid</span><br><span class="line">--with-pcre=../pcre2<span class="number">-10.42</span></span><br><span class="line">--with-zlib=../zlib<span class="number">-1.2</span><span class="number">.13</span></span><br><span class="line">--with-http_ssl_module</span><br><span class="line">--with-stream</span><br><span class="line">--with-mail=dynamic</span><br><span class="line">--add-module=/usr/build/nginx-rtmp-module</span><br><span class="line">--add-dynamic-module=/usr/build/<span class="number">3</span>party_module</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•° <code>ï¼ˆParameterï¼‰</code></th>
<th>è¯´æ˜ <code>ï¼ˆDescription  ï¼‰</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code> --prefix=</code></td>
<td>æŒ‡å®šå®‰è£…â½¬å½•</td>
</tr>
<tr>
<td><code>--sbin-path=</code></td>
<td>æŒ‡å®š Nginx å¯æ‰§â¾â½‚ä»¶</td>
</tr>
<tr>
<td><code> --conf-path=</code></td>
<td>æŒ‡å®šé…ç½®â½‚ä»¶ä½ç½®</td>
</tr>
<tr>
<td><code>--pid-path=</code></td>
<td>æŒ‡å®š <code>pid</code>  â½‚ä»¶ä½ç½®</td>
</tr>
<tr>
<td><code>--error-log-path=</code></td>
<td>æŒ‡å®šé”™è¯¯â½‡å¿—â½‚ä»¶</td>
</tr>
<tr>
<td><code>--http-log-path=  </code></td>
<td>æŒ‡å®š <code>HTTP</code>  â½‡å¿—â½‚ä»¶</td>
</tr>
<tr>
<td><code>--user= </code></td>
<td>æŒ‡å®šè¿â¾ Nginx çš„â½¤æˆ·</td>
</tr>
<tr>
<td><code>--group=</code></td>
<td>æŒ‡å®šè¿â¾ Nginx çš„ç»„</td>
</tr>
<tr>
<td><code>--with-pcre=</code></td>
<td>æŒ‡å®š <code>PCRE</code>  åº“çš„ä½ç½®</td>
</tr>
<tr>
<td><code>--with-pcre-jit</code></td>
<td>å¼€å¯ <code>PCRE</code>  çš„ <code>JITï¼ˆJust-in-time compilationï¼‰</code> â½€æŒ</td>
</tr>
<tr>
<td><code>--with-zlib=  </code></td>
<td>æŒ‡å®š <code>zlib</code>  åº“çš„ä½ç½®</td>
</tr>
</tbody>
</table>
<p><a name="nLTXK"></a></p>
<h3 id="nginxå®‰è£…é¢„ç¼–è¯‘äºŒè¿›åˆ¶åŒ…"><a class="markdownIt-Anchor" href="#nginxå®‰è£…é¢„ç¼–è¯‘äºŒè¿›åˆ¶åŒ…">#</a> Nginx å®‰è£… (é¢„ç¼–è¯‘â¼†è¿›åˆ¶åŒ…)</h3>
<p>è¿™ç§â½…å¼â½é€šè¿‡æºç ç¼–è¯‘å®‰è£…çš„â½…å¼è¦ç®€å•å¿«æ·å¾—å¤šï¼Œåªéœ€è¦è¾“â¼Šâ¼€æ¡ <code>install</code>  å‘½ä»¤å°±å¯ä»¥äº†ã€‚ ä¸åŒ <code>Linux</code>  å‘â¾ç‰ˆçš„å®‰è£…â½…å¼ç•¥æœ‰ä¸åŒï¼Œä¸‹â¾¯åˆ†åˆ«ä»‹ç»â¼€ä¸‹ã€‚<br>
<a name="FWdiP"></a></p>
<h4 id="centosrheloracle-linuxalmalinuxrocky-linux-repository"><a class="markdownIt-Anchor" href="#centosrheloracle-linuxalmalinuxrocky-linux-repository">#</a>  <code>CentOS/RHEL/Oracle Linux/AlmaLinux/Rocky Linux repository.</code></h4>
<p><code>CentOS</code>  ç³» <code>Linux</code>  å‘â¾ç‰ˆå¯ä»¥ä½¿â½¤ <code>yum</code>  æ¥å®‰è£…ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># <span class="number">1.</span> å®‰è£…EPELä»“åº“</span><br><span class="line">sudo yum install epel-release</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span> æ›´æ–°repo</span><br><span class="line">sudo yum update</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span> å®‰è£…nginx</span><br><span class="line">sudo yum install nginx</span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span> éªŒè¯å®‰è£…</span><br><span class="line">sudo nginx -V</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥é€šè¿‡ <code>Nginx</code>  çš„å®˜â½…ä»“åº“æ¥å®‰è£…ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å®‰è£…çš„æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ã€‚</p>
<ol>
<li>å®‰è£…å‰ç½®ä¾èµ–</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install yum-utils</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æ·»åŠ  nginx ä»“åº“</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/yum.repos.d/nginx.repo</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>æ·»åŠ ä»¥ä¸‹å†…å®¹</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[nginx-stable] [nginx-stable]</span><br><span class="line">name=nginx stable repo</span><br><span class="line">baseurl=http:<span class="comment">//nginx.org/packages/centos/$releasever/$basearch/</span></span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">enabled=<span class="number">1</span></span><br><span class="line">gpgkey=https:<span class="comment">//nginx.org/keys/nginx_signing.key</span></span><br><span class="line">module_hotfixes=<span class="literal">true</span></span><br><span class="line">[nginx-mainline] [nginx-mainline]</span><br><span class="line">name=nginx mainline repo</span><br><span class="line">baseurl=http:<span class="comment">//nginx.org/packages/mainline/centos/$releasever/$basearch/</span></span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">enabled=<span class="number">0</span></span><br><span class="line">gpgkey=https:<span class="comment">//nginx.org/keys/nginx_signing.key</span></span><br><span class="line">module_hotfixes=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šâ¾¯çš„  <code>stable</code>  å’Œ <code>mainline</code>  å°±åˆ†åˆ«è¡¨ç¤ºç¨³å®šç‰ˆå’Œä¸»çº¿ç‰ˆï¼Œå¯ä»¥æ ¹æ®â¾ƒâ¼°çš„éœ€è¦æ¥é€‰æ‹©ã€‚</p>
<ol start="4">
<li>æ›´æ–° repo</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>å®‰è£… nginx</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install nginx</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>éªŒè¯å®‰è£…</li>
</ol>
<p>é™¤äº†ä½¿â½¤  <code>sudo nginx -V</code>  ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿â½¤ä¸‹â¾¯çš„â½…å¼æ¥éªŒè¯ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># å¯åŠ¨Nginx</span><br><span class="line">sudo nginx</span><br><span class="line">curl -I <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœèƒ½å¤Ÿçœ‹åˆ°ç±»ä¼¼ä¸‹â¾¯çš„è¾“å‡ºï¼Œå°±è¡¨ç¤ºå®‰è£…æˆåŠŸäº†ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Server: nginx/<span class="number">1.25</span><span class="number">.1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a name="R7FCy"></a></p>
<h4 id="debianubuntu-repository"><a class="markdownIt-Anchor" href="#debianubuntu-repository">#</a>  <code>Debian/Ubuntu repository  </code></h4>
<p><code>Debian</code> ã€ <code>Ubuntu</code>  ç³»åˆ—çš„ <code>Linux</code>  å‘â¾ç‰ˆå¯ä»¥ä½¿â½¤ <code>apt</code>  æ¥å®‰è£…ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># <span class="number">1.</span> æ›´æ–°ä»“åº“ä¿¡æ¯</span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span> å®‰è£…nginx</span><br><span class="line">sudo apt-get install nginx</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span> éªŒè¯å®‰è£…</span><br><span class="line">sudo nginx -V</span><br></pre></td></tr></table></figure>
<p>åŒæ ·ä¹Ÿå¯ä»¥ä» <code>Nginx</code>  å®˜â½…ä»“åº“æ¥å®‰è£…ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># <span class="number">1.</span> å®‰è£…å‰ç½®ä¾èµ–</span><br><span class="line">sudo apt install curl gnupg2 ca-certificates lsb-release debian-archivekeyring</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span> å¯¼â¼Šå®˜â½…Nginxç­¾åå¯†é’¥</span><br><span class="line">curl https:<span class="comment">//nginx.org/keys/nginx_signing.key | gpg --dearmor \</span></span><br><span class="line"><span class="comment"> | sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null</span></span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span> éªŒè¯ä¸‹è½½çš„â½‚ä»¶ä¸­åŒ…å«äº†æ­£ç¡®çš„å¯†é’¥</span><br><span class="line">gpg --dry-run --quiet --no-keyring --import --import-options import-show</span><br><span class="line">/usr/share/keyrings/nginx-archive-keyring.gpg</span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span> è®¾ç½®ç¨³å®šç‰ˆæˆ–è€…ä¸»çº¿ç‰ˆçš„NginxåŒ…</span><br><span class="line"># ç¨³å®šç‰ˆ</span><br><span class="line">echo <span class="string">&quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \</span></span><br><span class="line"><span class="string">http://nginx.org/packages/debian `lsb_release -cs` nginx&quot;</span> \</span><br><span class="line"> | sudo tee /etc/apt/sources.<span class="built_in">list</span>.d/nginx.<span class="built_in">list</span></span><br><span class="line"># ä¸»çº¿ç‰ˆ</span><br><span class="line">echo <span class="string">&quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \</span></span><br><span class="line"><span class="string">http://nginx.org/packages/mainline/debian `lsb_release -cs` nginx&quot;</span> \</span><br><span class="line"> | sudo tee /etc/apt/sources.<span class="built_in">list</span>.d/nginx.<span class="built_in">list</span></span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span> è®¾ç½®ä»“åº“ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆä½¿â½¤Nginxå®˜â½…ä»“åº“</span><br><span class="line">echo -e <span class="string">&quot;Package: *\nPin: origin nginx.org\nPin: release o=nginx\nPinPriority: 900\n&quot;</span> \</span><br><span class="line"> | sudo tee /etc/apt/preferences.d/<span class="number">99</span>nginx</span><br><span class="line"></span><br><span class="line"># <span class="number">6.</span> å®‰è£…nginx</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install nginx</span><br><span class="line"></span><br><span class="line"># <span class="number">7.</span> éªŒè¯å®‰è£…</span><br><span class="line">sudo nginx</span><br><span class="line">curl -I <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure>
<p><a name="yhB80"></a></p>
<h2 id="æ–¹å¼ä¸‰ä½¿ç”¨dockerå®‰è£…"><a class="markdownIt-Anchor" href="#æ–¹å¼ä¸‰ä½¿ç”¨dockerå®‰è£…">#</a> æ–¹å¼ä¸‰ï¼šä½¿ç”¨ <code>Docker</code>  å®‰è£…</h2>
<p><code>$ docker pull nginx</code></p>
<p><a name="SuntV"></a></p>
<h1 id="æœåŠ¡å¯åœ"><a class="markdownIt-Anchor" href="#æœåŠ¡å¯åœ">#</a> æœåŠ¡å¯åœ</h1>
<p>å¯åŠ¨ï¼šç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ <code>nginx</code> <br />æµè§ˆå™¨ï¼š <code>localhost</code> <br />æŸ¥çœ‹è¿›ç¨‹ï¼š <code>ps -ef|grep nginx</code> <br /><img data-src="https://cdn.nlark.com/yuque/0/2023/png/34696645/1689730266000-56189548-7250-4075-a8d7-ebe07a21c2cb.png#averageHue=%233285c9&amp;clientId=u5faf9193-7775-4&amp;from=paste&amp;height=533&amp;id=u16db3c4b&amp;originHeight=666&amp;originWidth=1328&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=289692&amp;status=done&amp;style=none&amp;taskId=udf067811-97d6-4a7e-908b-526572648bc&amp;title=&amp;width=1062.4" alt="image.png"><br />æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µï¼š <code>lsof -i:80</code> <br /> <code>nginx -s signal</code>  åœæ­¢æˆ–è€…é‡å¯</p>
<ul>
<li><code>signal</code>  å¯æ›¿æ¢ä¸ºä»¥ä¸‹ï¼š
<ul>
<li><code>quit</code>  ä¼˜é›…åœæ­¢</li>
<li><code>stop</code>  ç«‹å³åœæ­¢</li>
<li><code>reload</code>  é‡è½½é…ç½®æ–‡ä»¶</li>
<li><code>reopen</code>  é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶<br>
<a name="fzJbd"></a></li>
</ul>
</li>
</ul>
<h1 id="é™æ€ç«™ç‚¹çš„éƒ¨ç½²"><a class="markdownIt-Anchor" href="#é™æ€ç«™ç‚¹çš„éƒ¨ç½²">#</a> é™æ€ç«™ç‚¹çš„éƒ¨ç½²</h1>
<p><code>nginx -V</code>  æŸ¥çœ‹ Nginx çš„å®‰è£…ç›®å½•ã€ç¼–è¯‘å‚æ•°ä»¥åŠé…ç½®æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶çš„ä½ç½®ç­‰å„ç§ä¿¡æ¯ã€‚<br /> <code>nginx -t</code>  æŸ¥çœ‹ nginx é…ç½®æ–‡ä»¶</p>
<ul>
<li><img data-src="https://cdn.nlark.com/yuque/0/2023/png/34696645/1689730733672-86a66b10-7296-477d-bc77-ccbf2564da10.png#averageHue=%230e83fd&amp;clientId=u5faf9193-7775-4&amp;from=paste&amp;height=284&amp;id=u6c5abd69&amp;originHeight=355&amp;originWidth=742&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=107512&amp;status=done&amp;style=none&amp;taskId=ua00b778b-5f2d-47a4-8412-6db3a2e363f&amp;title=&amp;width=593.6" alt="image.png"><br>
<a name="LmzY0"></a></li>
</ul>
<h1 id="nginxçš„é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#nginxçš„é…ç½®æ–‡ä»¶">#</a> Nginx çš„é…ç½®â½‚ä»¶</h1>
<p>Nginx çš„é…ç½®â½‚ä»¶æ˜¯  <code>nginx.conf </code> ï¼Œâ¼€èˆ¬ä½äº  <code>/etc/nginx/nginx.conf </code> ã€‚ å¯ä»¥ä½¿â½¤  <code>nginx -t </code> æ¥æŸ¥çœ‹é…ç½®â½‚ä»¶çš„ä½ç½®å’Œæ£€æŸ¥é…ç½®â½‚ä»¶æ˜¯å¦æ­£ç¡®ã€‚<br>
<a name="cvhFS"></a></p>
<h2 id="é…ç½®æ–‡ä»¶çš„ç»“æ„"><a class="markdownIt-Anchor" href="#é…ç½®æ–‡ä»¶çš„ç»“æ„">#</a> é…ç½®â½‚ä»¶çš„ç»“æ„</h2>
<p>Nginx çš„é…ç½®â½‚ä»¶æ˜¯ç”±â¼€ç³»åˆ—çš„æŒ‡ä»¤ç»„æˆçš„ï¼Œæ¯ä¸ªæŒ‡ä»¤éƒ½æ˜¯ç”±â¼€ä¸ªæŒ‡ä»¤åå’Œâ¼€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°ç»„æˆçš„ã€‚<br /> æŒ‡ä»¤å’Œå‚æ•°ä¹‹é—´ä½¿â½¤ç©ºæ ¼æ¥åˆ†éš”ï¼ŒæŒ‡ä»¤ä»¥åˆ†å·ï¼›ç»“å°¾ï¼Œå‚æ•°å¯ä»¥ä½¿â½¤å•å¼•å·æˆ–è€…åŒå¼•å·æ¥åŒ…è£¹  <br /> é…ç½®â½‚ä»¶åˆ†ä¸ºä»¥ä¸‹â¼ä¸ªéƒ¨åˆ†ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># å…¨å±€å—</span><br><span class="line">worker_processes <span class="number">1</span>;</span><br><span class="line">events &#123;</span><br><span class="line">	<span class="meta"># eventså—</span></span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">	<span class="meta"># httpå—</span></span><br><span class="line"> 	server &#123;</span><br><span class="line">		<span class="meta"># serverå—</span></span><br><span class="line"> 		location / &#123;</span><br><span class="line">			<span class="meta"># locationå—</span></span><br><span class="line"> 		&#125;</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="PaZue"></a></p>
<h3 id="å…¨å±€å—"><a class="markdownIt-Anchor" href="#å…¨å±€å—">#</a> å…¨å±€å—</h3>
<p>å…¨å±€å—æ˜¯é…ç½®â½‚ä»¶çš„ç¬¬â¼€ä¸ªå—ï¼Œä¹Ÿæ˜¯é…ç½®â½‚ä»¶çš„ä¸»ä½“éƒ¨åˆ†ï¼Œä¸»è¦â½¤æ¥è®¾ç½®â¼€äº›å½±å“ <code>Nginx</code>  æœåŠ¡ å™¨æ•´ä½“è¿â¾çš„é…ç½®æŒ‡ä»¤ï¼Œä¸»è¦åŒ…æ‹¬é…ç½®è¿â¾ <code>Nginx</code>  æœåŠ¡å™¨çš„â½¤æˆ·ï¼ˆç»„ï¼‰ã€å…è®¸â½£æˆçš„ <code>worker process</code>  æ•°ã€è¿›ç¨‹ <code>PID</code>  å­˜æ”¾è·¯å¾„ã€â½‡å¿—å­˜æ”¾è·¯å¾„å’Œç±»å‹ä»¥åŠé…ç½®â½‚ä»¶å¼•â¼Šç­‰ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># æŒ‡å®šè¿â¾NginxæœåŠ¡å™¨çš„â½¤æˆ·ï¼Œåªèƒ½åœ¨å…¨å±€å—é…ç½®</span><br><span class="line"># å°†useræŒ‡ä»¤æ³¨é‡Šæ‰ï¼Œæˆ–è€…é…ç½®æˆnobodyçš„è¯æ‰€æœ‰â½¤æˆ·éƒ½å¯ä»¥è¿â¾</span><br><span class="line"><span class="meta"># user [user] [group]</span></span><br><span class="line"><span class="meta"># user nobody nobody;</span></span><br><span class="line">user nginx;</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šâ½£æˆçš„workerè¿›ç¨‹çš„æ•°é‡ï¼Œä¹Ÿå¯ä½¿â½¤â¾ƒåŠ¨æ¨¡å¼ï¼Œåªèƒ½åœ¨å…¨å±€å—é…ç½®</span><br><span class="line">worker_processes <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"># é”™è¯¯â½‡å¿—å­˜æ”¾è·¯å¾„å’Œç±»å‹</span><br><span class="line">error_log  /var/<span class="built_in">log</span>/nginx/error.<span class="built_in">log</span> warn;</span><br><span class="line"></span><br><span class="line"># è¿›ç¨‹PIDå­˜æ”¾è·¯å¾„</span><br><span class="line">pid    /var/run/nginx.pid;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a name="nhDgE"></a></p>
<h3 id="eventså—"><a class="markdownIt-Anchor" href="#eventså—">#</a> events å—</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">events &#123;</span><br><span class="line">	# æŒ‡å®šä½¿â½¤å“ªç§â½¹ç»œIOæ¨¡å‹ï¼Œåªèƒ½åœ¨eventså—ä¸­è¿›â¾é…ç½®</span><br><span class="line">	<span class="meta"># use epoll</span></span><br><span class="line">	# æ¯ä¸ªworker processå…è®¸çš„æœ€â¼¤è¿æ¥æ•°</span><br><span class="line">	 worker_connections <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="g8zFo"></a></p>
<h3 id="httpå—"><a class="markdownIt-Anchor" href="#httpå—">#</a> http å—</h3>
<p><code>http</code>  å—æ˜¯é…ç½®â½‚ä»¶çš„ä¸»è¦éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ <code>http</code>  å…¨å±€å—å’Œ <code>server</code>  å—ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">	<span class="meta"># nginx å¯ä»¥ä½¿â½¤<span class="keyword">include</span>æŒ‡ä»¤å¼•â¼Šå…¶ä»–é…ç½®â½‚ä»¶</span></span><br><span class="line">	 include 	/etc/nginx/mime.types;</span><br><span class="line">	# é»˜è®¤ç±»å‹ï¼Œå¦‚æœè¯·æ±‚çš„URLæ²¡æœ‰åŒ…å«â½‚ä»¶ç±»å‹ï¼Œä¼šä½¿â½¤é»˜è®¤ç±»å‹</span><br><span class="line">	 default_type application/octet-stream; # é»˜è®¤ç±»å‹</span><br><span class="line">	</span><br><span class="line">    # å¼€å¯â¾¼æ•ˆâ½‚ä»¶ä¼ è¾“æ¨¡å¼</span><br><span class="line"> 	sendfile on;</span><br><span class="line"></span><br><span class="line">    # è¿æ¥è¶…æ—¶æ—¶é—´</span><br><span class="line"> 	keepalive_timeout <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    # access_log â½‡å¿—å­˜æ”¾è·¯å¾„å’Œç±»å‹</span><br><span class="line"></span><br><span class="line">    # æ ¼å¼ä¸ºï¼šaccess_log &lt;path&gt; [format [buffer=size] [gzip[=level]]</span><br><span class="line">[flush=time] [<span class="keyword">if</span>=condition]];</span><br><span class="line"> 	access_log /var/<span class="built_in">log</span>/nginx/access.<span class="built_in">log</span> main;</span><br><span class="line"></span><br><span class="line">    # å®šä¹‰â½‡å¿—æ ¼å¼</span><br><span class="line"> 	log_format main <span class="string">&#x27;$remote_addr - $remote_user [$time_local]</span></span><br><span class="line"><span class="string">&quot;$request&quot; &#x27;</span></span><br><span class="line">					<span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">					<span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span><br><span class="line">	# è®¾ç½®sendfileæœ€â¼¤ä¼ è¾“â½šæ®µâ¼¤â¼©ï¼Œé»˜è®¤ä¸º<span class="number">0</span>ï¼Œè¡¨ç¤ºä¸é™åˆ¶</span><br><span class="line">	# sendfile_max_chunk <span class="number">1</span>m;</span><br><span class="line"></span><br><span class="line">    # æ¯ä¸ªè¿æ¥çš„è¯·æ±‚æ¬¡æ•°</span><br><span class="line">	# keepalive_requests <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta"># keepaliveè¶…æ—¶æ—¶é—´</span></span><br><span class="line"> 	keepalive_timeout <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    # å¼€å¯gzipå‹ç¼©</span><br><span class="line">	<span class="meta"># gzip on;</span></span><br><span class="line"></span><br><span class="line">    # å¼€å¯gzipå‹ç¼©çš„æœ€â¼©â½‚ä»¶â¼¤â¼©</span><br><span class="line">	# gzip_min_length <span class="number">1</span>k;</span><br><span class="line"></span><br><span class="line">    <span class="meta"># gzipå‹ç¼©çº§åˆ«ï¼Œ1-9ï¼Œçº§åˆ«è¶Šâ¾¼å‹ç¼©ç‡è¶Šâ¾¼ï¼Œä½†æ˜¯æ¶ˆè€—CPUèµ„æºä¹Ÿè¶Šå¤š</span></span><br><span class="line">	# gzip_comp_level <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta"># gzipå‹ç¼©â½‚ä»¶ç±»å‹</span></span><br><span class="line">	# gzip_types text/plain application/javascript application/xjavascript text/css application/xml text/javascript application/x-httpdphp image/jpeg image/gif image/png;</span><br><span class="line">	</span><br><span class="line">    <span class="meta"># upstreamæŒ‡ä»¤â½¤äºå®šä¹‰â¼€ç»„æœåŠ¡å™¨ï¼Œâ¼€èˆ¬â½¤æ¥é…ç½®åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡</span></span><br><span class="line"> 	upstream www.example.com &#123;</span><br><span class="line">	</span><br><span class="line">        # ip_hashæŒ‡ä»¤â½¤äºè®¾ç½®è´Ÿè½½å‡è¡¡çš„â½…å¼ï¼Œip_hashè¡¨ç¤ºä½¿â½¤å®¢æˆ·ç«¯çš„IPè¿›â¾hashï¼Œ</span><br><span class="line">è¿™æ ·å¯ä»¥ä¿è¯åŒâ¼€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚æ¯æ¬¡éƒ½ä¼šåˆ†é…åˆ°åŒâ¼€ä¸ªæœåŠ¡å™¨ï¼Œè§£å†³äº†sessionå…±äº«çš„é—®é¢˜</span><br><span class="line"> 		ip_hash;</span><br><span class="line">		<span class="meta"># weight â½¤äºè®¾ç½®æƒé‡ï¼Œæƒé‡è¶Šâ¾¼è¢«åˆ†é…åˆ°çš„â¼ç‡è¶Šâ¼¤</span></span><br><span class="line"> 		server <span class="number">192.168</span><span class="number">.50</span><span class="number">.11</span>:<span class="number">80</span> weight=<span class="number">3</span>;</span><br><span class="line"> 		server <span class="number">192.168</span><span class="number">.50</span><span class="number">.12</span>:<span class="number">80</span>;</span><br><span class="line"> 		server <span class="number">192.168</span><span class="number">.50</span><span class="number">.13</span>:<span class="number">80</span>;</span><br><span class="line"> 	&#125;</span><br><span class="line">	server &#123;</span><br><span class="line">		# å‚è€ƒserverå—çš„é…ç½®</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="RlVan"></a></p>
<h3 id="serverå—"><a class="markdownIt-Anchor" href="#serverå—">#</a> server å—</h3>
<p><code>server</code>  å—æ˜¯é…ç½®è™šæ‹Ÿä¸»æœºçš„ï¼Œâ¼€ä¸ª <code>http</code>  å—å¯ä»¥åŒ…å«å¤šä¸ª <code>server</code>  å—ï¼Œæ¯ä¸ª <code>server</code>  å—å°±æ˜¯â¼€ä¸ªè™šæ‹Ÿä¸» æœºã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    # ç›‘å¬IPå’Œç«¯â¼</span><br><span class="line">    <span class="meta"># listençš„æ ¼å¼ä¸ºï¼š</span></span><br><span class="line">    <span class="meta"># listen [ip]:port [default_server] [ssl] [http2] [spdy]</span></span><br><span class="line">    [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number];</span><br><span class="line">    <span class="meta"># listenæŒ‡ä»¤â¾®å¸¸çµæ´»ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªIPå’Œç«¯â¼ï¼Œä¹Ÿå¯ä»¥ä½¿â½¤é€šé…ç¬¦</span></span><br><span class="line">    # ä¸‹â¾¯æ˜¯â¼ä¸ªå®é™…çš„ä¾‹â¼¦ï¼š</span><br><span class="line">    <span class="meta"># listen 127.0.0.1:80; # ç›‘å¬æ¥â¾ƒ127.0.0.1çš„80ç«¯â¼çš„è¯·æ±‚</span></span><br><span class="line">    <span class="meta"># listen 80; # ç›‘å¬æ¥â¾ƒæ‰€æœ‰IPçš„80ç«¯â¼çš„è¯·æ±‚</span></span><br><span class="line">    <span class="meta"># listen *:80; # ç›‘å¬æ¥â¾ƒæ‰€æœ‰IPçš„80ç«¯â¼çš„è¯·æ±‚ï¼ŒåŒä¸Š</span></span><br><span class="line">    <span class="meta"># listen 127.0.0.1; # ç›‘å¬æ¥â¾ƒæ¥â¾ƒ127.0.0.1çš„80ç«¯â¼ï¼Œé»˜è®¤ç«¯â¼ä¸º80</span></span><br><span class="line">    listen 	<span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">    # server_name â½¤æ¥æŒ‡å®šè™šæ‹Ÿä¸»æœºçš„åŸŸåï¼Œå¯ä»¥ä½¿â½¤ç²¾ç¡®åŒ¹é…ã€é€šé…ç¬¦åŒ¹é…å’Œæ­£åˆ™åŒ¹é…ç­‰</span><br><span class="line">    â½…å¼</span><br><span class="line">    # server_name example.org www.example.org; # ç²¾ç¡®åŒ¹é…</span><br><span class="line">    # server_name *.example.org; # é€šé…ç¬¦åŒ¹é…</span><br><span class="line">    # server_name ~^www\d+\.example\.net$; # æ­£åˆ™åŒ¹é…</span><br><span class="line">    server_name localhost;</span><br><span class="line"></span><br><span class="line">    <span class="meta"># locationå—â½¤æ¥é…ç½®è¯·æ±‚çš„è·¯ç”±ï¼Œâ¼€ä¸ªserverå—å¯ä»¥åŒ…å«å¤šä¸ªlocationå—ï¼Œæ¯ä¸ª</span></span><br><span class="line">    locationå—å°±æ˜¯â¼€ä¸ªè¯·æ±‚è·¯ç”±</span><br><span class="line">    <span class="meta"># locationå—çš„æ ¼å¼æ˜¯ï¼š</span></span><br><span class="line">    <span class="meta"># location [=|~|~*|^~] /uri/ &#123; ... &#125;</span></span><br><span class="line">    # = è¡¨ç¤ºç²¾ç¡®åŒ¹é…ï¼Œåªæœ‰å®Œå…¨åŒ¹é…ä¸Šæ‰èƒ½â½£æ•ˆ</span><br><span class="line">    # ~ è¡¨ç¤ºåŒºåˆ†â¼¤â¼©å†™çš„æ­£åˆ™åŒ¹é…</span><br><span class="line">    # ~* è¡¨ç¤ºä¸åŒºåˆ†â¼¤â¼©å†™çš„æ­£åˆ™åŒ¹é…</span><br><span class="line">    # ^~ è¡¨ç¤ºæ™®é€šå­—ç¬¦åŒ¹é…ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™ä¸å†åŒ¹é…å…¶ä»–location</span><br><span class="line">    # /uri/ è¡¨ç¤ºè¯·æ±‚çš„URIï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">    # &#123; ... &#125; è¡¨ç¤ºlocationå—çš„é…ç½®å†…å®¹</span><br><span class="line">    location / &#123;</span><br><span class="line">    <span class="meta"># rootæŒ‡ä»¤â½¤äºæŒ‡å®šè¯·æ±‚çš„æ ¹â½¬å½•ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">    root /usr/share/nginx/html; # æ ¹â½¬å½•</span><br><span class="line">    <span class="meta"># indexæŒ‡ä»¤â½¤äºæŒ‡å®šé»˜è®¤â½‚ä»¶ï¼Œå¦‚æœè¯·æ±‚çš„æ˜¯â½¬å½•ï¼Œåˆ™ä¼šåœ¨â½¬å½•ä¸‹æŸ¥æ‰¾é»˜è®¤â½‚ä»¶</span></span><br><span class="line">    index index.html index.htm; # é»˜è®¤â½‚ä»¶</span><br><span class="line">    &#125;</span><br><span class="line">    # ä¸‹â¾¯æ˜¯â¼€äº›locationçš„ç¤ºä¾‹ï¼š</span><br><span class="line">    location = / &#123; # ç²¾ç¡®åŒ¹é…è¯·æ±‚</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line">              index index.html index.htm;</span><br><span class="line">             &#125;</span><br><span class="line">    location ^~ /images/ &#123; # åŒ¹é…ä»¥/images/å¼€å¤´çš„è¯·æ±‚</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line">                     &#125;</span><br><span class="line">    location ~* \.(gif|jpg|jpeg)$ &#123; # åŒ¹é…ä»¥gifã€jpgæˆ–è€…jpegç»“å°¾çš„è¯·æ±‚</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line">                              &#125;</span><br><span class="line">    location !~ \.(gif|jpg|jpeg)$ &#123; # ä¸åŒ¹é…ä»¥gifã€jpgæˆ–è€…jpegç»“å°¾çš„è¯·æ±‚</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line">                              &#125;</span><br><span class="line">    location !~* \.(gif|jpg|jpeg)$ &#123; # ä¸åŒ¹é…ä»¥gifã€jpgæˆ–è€…jpegç»“å°¾çš„è¯·æ±‚</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line">                               &#125;</span><br><span class="line"></span><br><span class="line">    # error_page â½¤äºæŒ‡å®šé”™è¯¯â»šâ¾¯ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§ä»â¾¼åˆ°ä½ä¾æ¬¡æŸ¥æ‰¾</span><br><span class="line">    error_page <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span> /<span class="number">50</span>x.html; # é”™è¯¯â»šâ¾¯</span><br><span class="line">    location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a name="JG5xY"></a></p>
<h1 id="nginxçš„å¸¸ç”¨å‘½ä»¤"><a class="markdownIt-Anchor" href="#nginxçš„å¸¸ç”¨å‘½ä»¤">#</a> Nginx çš„å¸¸â½¤å‘½ä»¤</h1>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nginx 				# å¯åŠ¨Nginx</span><br><span class="line">nginx -c filename 	# æŒ‡å®šé…ç½®â½‚ä»¶</span><br><span class="line">nginx -V 			# æŸ¥çœ‹Nginxçš„ç‰ˆæœ¬å’Œç¼–è¯‘å‚æ•°ç­‰ä¿¡æ¯</span><br><span class="line">nginx -t			# æ£€æŸ¥é…ç½®â½‚ä»¶æ˜¯å¦æ­£ç¡®ï¼Œä¹Ÿå¯â½¤æ¥å®šä½é…ç½®â½‚ä»¶çš„ä½ç½®</span><br><span class="line">nginx -s quit 		# ä¼˜é›…åœâ½ŒNginx</span><br><span class="line">nginx -s stop 		# å¿«é€Ÿåœâ½ŒNginx</span><br><span class="line">nginx -s reload 	# é‡æ–°åŠ è½½é…ç½®â½‚ä»¶</span><br><span class="line">nginx -s reopen 	# é‡æ–°æ‰“å¼€â½‡å¿—â½‚ä»¶</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a name="pajQD"></a></p>
<h1 id="nginxçš„å¸¸ç”¨æ¨¡å—"><a class="markdownIt-Anchor" href="#nginxçš„å¸¸ç”¨æ¨¡å—">#</a> Nginx çš„å¸¸â½¤æ¨¡å—</h1>
<table>
<thead>
<tr>
<th>æ¨¡å—åï¼ˆModule Nameï¼‰</th>
<th>æè¿°ï¼ˆDescriptionï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>http_access_module</code></td>
<td>æ¥å—æˆ–è€…æ‹’ç»ç‰¹å®šçš„å®¢æˆ·ç«¯è¯·æ±‚</td>
</tr>
<tr>
<td><code>http_auth_basic_module</code></td>
<td><code>HTTP</code>  åŸºæœ¬è®¤è¯ï¼Œä½¿â½¤â½¤æˆ·åå’Œå¯†ç æ¥é™åˆ¶å¯¹èµ„æºçš„ è®¿é—®</td>
</tr>
<tr>
<td><code>http_autoindex_module </code></td>
<td>â¾ƒåŠ¨ç´¢å¼•ï¼Œâ½¤äºæ˜¾ç¤ºâ½¬å½•åˆ—è¡¨</td>
</tr>
<tr>
<td><code> http_browser_module</code></td>
<td>ä»  <code>User-Agent </code> è¯·æ±‚å¤´ä¸­è·å–å’Œè¯†åˆ«å®¢æˆ·ç«¯æµè§ˆå™¨</td>
</tr>
<tr>
<td><code> http_charset_module</code></td>
<td>æ·»åŠ ç‰¹å®šçš„å­—ç¬¦é›†åˆ°  <code>Content-Type</code>  å“åº”å¤´ä¸­</td>
</tr>
<tr>
<td><code> http_empty_gif_module</code></td>
<td>è¿”å›â¼€ä¸ª 1 åƒç´ çš„é€æ˜ <code>GIF</code>  å›¾â½š</td>
</tr>
<tr>
<td><code>http_fastcgi_module </code></td>
<td><code>FastCGI</code>  â½€æŒ</td>
</tr>
<tr>
<td><code>http_geo_module </code></td>
<td>ä» <code>IP</code>  åœ°å€ä¸­è·å–åœ°ç†ä½ç½®ä¿¡æ¯</td>
</tr>
<tr>
<td><code>http_gzip_module</code></td>
<td><code>Gzip</code>  å‹ç¼©â½€æŒ</td>
</tr>
<tr>
<td><code>http_limit_conn_module  </code></td>
<td>é™åˆ¶å¹¶å‘è¿æ¥æ•°</td>
</tr>
<tr>
<td><code>http_limit_req_module</code></td>
<td>é™åˆ¶è¯·æ±‚é€Ÿç‡</td>
</tr>
<tr>
<td><code>http_map_module</code></td>
<td>ä»å˜é‡ä¸­è·å–å€¼</td>
</tr>
<tr>
<td><code>http_memcached_module  </code></td>
<td><code>Memcached</code>  â½€æŒ</td>
</tr>
<tr>
<td><code>http_proxy_module </code></td>
<td>åå‘ä»£ç†â½€æŒ</td>
</tr>
<tr>
<td><code>http_referer_module</code></td>
<td>é˜²ç›—é“¾</td>
</tr>
<tr>
<td><code>http_rewrite_module  </code></td>
<td><code>URL</code>  é‡å†™</td>
</tr>
<tr>
<td><code>http_scgi_module </code></td>
<td>è½¬å‘è¯·æ±‚åˆ° <code>SCGI</code>  æœåŠ¡å™¨</td>
</tr>
<tr>
<td><code>http_ssi_module</code></td>
<td>å¤„ç†å’Œâ½€æŒ <code>SSIï¼ˆServer Side Includesï¼‰</code></td>
</tr>
<tr>
<td><code>http_split_clients_module</code></td>
<td>æ ¹æ®å®¢æˆ·ç«¯ <code>IP</code>  åœ°å€æˆ–è€…å…¶ä»–å˜é‡å°†å®¢æˆ·ç«¯åˆ†é…åˆ°ç»„ ä¸­ï¼Œâ¼€èˆ¬â½¤äº <code>A/B</code>  æµ‹è¯•</td>
</tr>
<tr>
<td><code>http_upstream_hash_module</code></td>
<td>å¯â½¤â¼€è‡´æ€§å“ˆå¸Œè´Ÿè½½å‡è¡¡</td>
</tr>
<tr>
<td><code>http_upstream_ip_hash_module </code></td>
<td>å¯â½¤ <code>IP</code>  å“ˆå¸Œè´Ÿè½½å‡è¡¡</td>
</tr>
<tr>
<td><code>http_upstream_keepalive_module  </code></td>
<td>å¯â½¤â»“è¿æ¥è´Ÿè½½å‡è¡¡</td>
</tr>
<tr>
<td><code>http_upstream_least_conn_module </code></td>
<td>å¯â½¤æœ€å°‘è¿æ¥è´Ÿè½½å‡è¡¡</td>
</tr>
<tr>
<td><code>http_upstream_zone_module</code></td>
<td>å¯â½¤å…±äº«å†…å­˜è´Ÿè½½å‡è¡¡</td>
</tr>
<tr>
<td><code> http_userid_module</code></td>
<td>ä¸ºå®¢æˆ·ç«¯è®¾ç½®â¼€ä¸ªå”¯â¼€çš„ <code>IDï¼ˆUIDã€cookieï¼‰</code></td>
</tr>
<tr>
<td><code>http_uwsgi_module</code></td>
<td>è½¬å‘è¯·æ±‚åˆ° <code>uWSGI</code>  æœåŠ¡å™¨ï¼Œâ¼€èˆ¬â½¤äº <code>Python</code>  åº”ç”¨</td>
</tr>
</tbody>
</table>
<!-- flag of hidden posts -->
      <div class="tags">
          <a href="/tags/note/" rel="tag"><i class="ic i-tag"></i> note</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">æ›´æ–°äº</span>
    <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-07-19 10:29:25" itemprop="dateModified" datetime="2023-07-19T10:29:25+08:00">2023-07-19</time>
  </span>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Clown <i class="ic i-at"><em>@</em></i>â¸œâ¤â¸ğ“œğ“ ğ“ğ’¾ğ’»ğ“® â€™â€™â¥Â»Â»
  </li>
  <li class="link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://fairyxxx.github.io/note/Nginx%E5%9F%BA%E7%A1%80/" title="Nginx åŸºç¡€">https://fairyxxx.github.io/note/NginxåŸºç¡€/</a>
  </li>
  <li class="license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
    </div>
    <div class="item right">
    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#nginx%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text"> Nginx ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#nginx%E7%9A%84%E7%89%88%E6%9C%AC"><span class="toc-number">1.1.</span> <span class="toc-text"> Nginx çš„ç‰ˆæœ¬</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nginx%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text"> Nginx çš„å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">2.1.</span> <span class="toc-text"> æ–¹å¼ä¸€ï¼šåŒ…ç®¡ç†å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="toc-number">2.2.</span> <span class="toc-text"> æ–¹å¼äºŒï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="toc-number">2.2.1.</span> <span class="toc-text"> ä»æºç ç¼–è¯‘å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85pcre%E5%BA%93"><span class="toc-number">2.2.1.1.</span> <span class="toc-text"> å®‰è£… PCRE  åº“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85zlib%E5%BA%93"><span class="toc-number">2.2.1.2.</span> <span class="toc-text"> å®‰è£… zlib  åº“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85open-ssl%E5%BA%93"><span class="toc-number">2.2.1.3.</span> <span class="toc-text"> å®‰è£… Open SSL  åº“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDnginx%E6%BA%90%E7%A0%81"><span class="toc-number">2.2.1.4.</span> <span class="toc-text"> ä¸‹è½½ Nginx  æºç </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9"><span class="toc-number">2.2.1.5.</span> <span class="toc-text"> é…ç½®ç¼–è¯‘é€‰é¡¹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx%E5%AE%89%E8%A3%85%E9%A2%84%E7%BC%96%E8%AF%91%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%8C%85"><span class="toc-number">2.2.2.</span> <span class="toc-text"> Nginx å®‰è£… (é¢„ç¼–è¯‘â¼†è¿›åˆ¶åŒ…)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#centosrheloracle-linuxalmalinuxrocky-linux-repository"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">  CentOS&#x2F;RHEL&#x2F;Oracle Linux&#x2F;AlmaLinux&#x2F;Rocky Linux repository.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#debianubuntu-repository"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">  Debian&#x2F;Ubuntu repository  </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%89%E4%BD%BF%E7%94%A8docker%E5%AE%89%E8%A3%85"><span class="toc-number">2.3.</span> <span class="toc-text"> æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Docker  å®‰è£…</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%81%9C"><span class="toc-number">3.</span> <span class="toc-text"> æœåŠ¡å¯åœ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%AB%99%E7%82%B9%E7%9A%84%E9%83%A8%E7%BD%B2"><span class="toc-number">4.</span> <span class="toc-text"> é™æ€ç«™ç‚¹çš„éƒ¨ç½²</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nginx%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text"> Nginx çš„é…ç½®â½‚ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.</span> <span class="toc-text"> é…ç½®â½‚ä»¶çš„ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%9D%97"><span class="toc-number">5.1.1.</span> <span class="toc-text"> å…¨å±€å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events%E5%9D%97"><span class="toc-number">5.1.2.</span> <span class="toc-text"> events å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%9D%97"><span class="toc-number">5.1.3.</span> <span class="toc-text"> http å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server%E5%9D%97"><span class="toc-number">5.1.4.</span> <span class="toc-text"> server å—</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nginx%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">6.</span> <span class="toc-text"> Nginx çš„å¸¸â½¤å‘½ä»¤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nginx%E7%9A%84%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97"><span class="toc-number">7.</span> <span class="toc-text"> Nginx çš„å¸¸â½¤æ¨¡å—</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« ">
      </div>
      <div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="Clown"
      data-src="//cdn.jsdelivr.net/gh/Fairyxxx/Fairyxxx.github.io@latest/images/avatar.jpg">
  <p class="name" itemprop="name">Clown</p>
  <div class="description" itemprop="description">æˆ‘å¾ˆå–œæ¬¢æ«å¶ï¼Œå¯æƒœï¼Œæ«å¶çº¢æ—¶ï¼Œæ€»å¤šç¦»åˆ«ã€‚</div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">46</span>
        <span class="name">æ–‡ç« </span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">2</span>
        <span class="name">æ ‡ç­¾</span>
      </a>
    </div>
</nav>

<div class="social">
      <a href="https://fairyxxx.github.io/axwz" title="https:&#x2F;&#x2F;fairyxxx.github.io&#x2F;axwz" class="item github"><i class="ic i-github"></i></a>
      <span class="exturl item bilibili" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMTdENHkxczdRMi8/c3BtX2lkX2Zyb209MzMzLjk5OS4wLjAmdmRfc291cmNlPWU3OWM4OWUxYjU5NzQwNWZlM2Y0YTc1MWZjN2NkZGNl" title="https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV17D4y1s7Q2&#x2F;?spm_id_from&#x3D;333.999.0.0&amp;vd_source&#x3D;e79c89e1b597405fe3f4a751fc7cddce"><i class="ic i-bilibili"></i></span>
      <span class="exturl item zhihu" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zOTEwNzMyMjY=" title="https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;391073226"><i class="ic i-zhihu"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvc29uZz9pZD01MTMzNjA3MjE=" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;song?id&#x3D;513360721"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vdHYvc2hvdy8xMDM0OjQ4MzUzNjg2MjE3Njg3OTk/ZnJvbT1vbGRfcGNfdmlkZW9zaG93" title="https:&#x2F;&#x2F;weibo.com&#x2F;tv&#x2F;show&#x2F;1034:4835368621768799?from&#x3D;old_pc_videoshow"><i class="ic i-weibo"></i></span>
      <span class="exturl item youtube" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1OLTVLSGw5Zlh0TSZhYl9jaGFubmVsPeaftOefpemBk0NoYWlLbm93c09mZmljaWFsQ2hhbm5lbA==" title="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;N-5KHl9fXtM&amp;ab_channel&#x3D;æŸ´çŸ¥é“ChaiKnowsOfficialChannel"><i class="ic i-youtube"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a>
  </li>

    
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>å½’æ¡£</a>
  </li>

    
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>æ ‡ç­¾</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2019 â€“ 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Clown @ Fairy Tale</span>
  </div>
  <div class="count">
    <span class="post-meta-item-icon">
      <i class="ic i-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">22k å­—</span>

    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="ic i-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">20 åˆ†é’Ÿ</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: 'note/NginxåŸºç¡€/',
    favicon: {
      show: "(*>ï¹<*)â€²",
      hide: "ã„Ÿ( â–”, â–” )ã„ ï¼"
    },
    search : {
      placeholder: "æ–‡ç« æœç´¢",
      empty: "å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",
      stats: "${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"
    },
    valine: true,fancybox: true,
    copyright: 'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      },
      true
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="//cdn.jsdelivr.net/gh/Fairyxxx/Fairyxxx.github.io@latest/js/app.js?v=0.2.5"></script>




</body>
</html>
